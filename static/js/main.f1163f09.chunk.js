(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{156:function(e,t,a){e.exports=a(249)},249:function(e,t,a){"use strict";a.r(t);a(157),a(183),a(185),a(186),a(188),a(189),a(190),a(191),a(192),a(193),a(194),a(195),a(197),a(198),a(199),a(200),a(201),a(202),a(203),a(204),a(205),a(206),a(208),a(209),a(210),a(211),a(212),a(213),a(214),a(215),a(216),a(217),a(218),a(219),a(220),a(221),a(222),a(223),a(224),a(225);var n=a(0),c=a.n(n),o=a(29),s=a.n(o),r=a(21),i=a.n(r),l=a(39),u=a(85),d=a(86),h=a(97),m=a(87),p=a(98),f=(a(233),a(44),a(16)),g=a(92),v=a.n(g),b=a(93),y=a.n(b),E=a(94),j=a.n(E),k=function(e){return c.a.createElement(f.i,{id:e.id,activePanel:"default"},c.a.createElement(f.c,{id:"default"},c.a.createElement(f.d,{noShadow:!0},"\u041c\u0430\u0440\u0448\u0440\u0443\u0442\u044b"),c.a.createElement(f.a,{size:"xl",level:"secondary",onClick:e.go,"data-to":"eyes"},"60 \u0441\u0435\u043a\u0443\u043d\u0434 \u0441\u043f\u043e\u043a\u043e\u0439\u0441\u0442\u0432\u0438\u044f")))},S=function(e){return c.a.createElement(f.i,{id:e.id,activePanel:"default"},c.a.createElement(f.c,{id:"default"},c.a.createElement(f.d,{noShadow:!0},"\u041a\u0430\u0440\u0442\u0430"),c.a.createElement(f.a,{size:"xl",level:"secondary",onClick:e.go,"data-to":"eyes"},"60 \u0441\u0435\u043a\u0443\u043d\u0434 \u0441\u043f\u043e\u043a\u043e\u0439\u0441\u0442\u0432\u0438\u044f")))},O=a(95),V=a.n(O),w=a(96),C=a.n(w),A=(a(239),a(240),Object(f.j)(),function(e){return c.a.createElement(f.i,{id:e.id,activePanel:"default"},c.a.createElement(V.a,{id:"default"},c.a.createElement(C.a,null,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")))}),U=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).onStoryChange=function(e){a.setState({activeStory:e.currentTarget.dataset.story})},a.go=function(e){a.setState({activeView:e.currentTarget.dataset.to})},a.onRemove=function(e){fetch("https://demo135.bravo.vkhackathon.com/api/schedule?".concat(a.state.urlObj,"&times=")+[].concat(Object(l.a)(a.state.schedule.slice(0,e)),Object(l.a)(a.state.schedule.slice(e+1))).join(","),{method:"POST"}).then((function(e){return e.json()})).then((function(t){console.log(t),a.setState({schedule:[].concat(Object(l.a)(a.state.schedule.slice(0,e)),Object(l.a)(a.state.schedule.slice(e+1)))})}))},console.log(a.getUrlVars()),a.state={activeView:"default",activeStory:"transport",popout:c.a.createElement(f.f,{size:"large"}),snackbar:null,urlVars:a.getUrlVars(),urlObj:a.objToQueryString(a.getUrlVars()),user:null,schedule:[],translations:{map:"\u041a\u0430\u0440\u0442\u0430",need_accept_notifications:"\u041d\u0430\u0434\u043e \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f",accept_notifications:"\u0420\u043e\u0437\u0440\u0435\u0448\u0438\u0442\u044c"}},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"getUrlVars",value:function(){var e={},t=window.location.search.substr(1).split("&");if(""===t[0])return!1;for(var a=0;a<t.length;a++){var n=t[a].split("=");e[n[0]]=n[1]}return e}},{key:"objToQueryString",value:function(e){for(var t=[],a=0;a<Object.keys(e).length;a+=1)t.push("".concat(encodeURIComponent(Object.keys(e)[a]),"=").concat(encodeURIComponent(Object.values(e)[a])));return t.join("&")}},{key:"componentDidMount",value:function(){var e=this;fetch("https://demo135.bravo.vkhackathon.com/api/translations?vk_language="+(this.state.urlVars.vk_language||"ru")).then((function(e){return e.json()})).then((function(t){e.setState({translations:t})})),console.log(this.state.urlVars),i.a.subscribe((function(t){switch(t.detail.type){case"VKWebAppGetUserInfoResult":fetch("https://demo135.bravo.vkhackathon.com/api/schedule?".concat(e.state.urlObj)).then((function(e){return e.json()})).then((function(a){e.setState({schedule:a,user:t.detail.data})}));case"VKWebAppUpdateConfig":var a=document.createAttribute("scheme");a.value=t.detail.data.scheme?t.detail.data.scheme:"client_light",document.body.attributes.setNamedItem(a)}console.log("new message",t.detail.type,t.detail.data)})),i.a.send("VKWebAppGetAuthToken",{app_id:7150429,scope:"stories"}),i.a.send("VKWebAppAllowMessagesFromGroup",{group_id:186987863,key:"jopa"}),window.connect=this.connect,this.setState({popout:null})}},{key:"render",value:function(){return c.a.createElement(f.e,{activeView:this.state.activeView},c.a.createElement(f.b,{id:"default",activeStory:this.state.activeStory,tabbar:c.a.createElement(f.g,null,c.a.createElement(f.h,{onClick:this.onStoryChange,selected:"transport"===this.state.activeStory,"data-story":"transport",text:"\u041c\u0430\u0440\u0448\u0440\u0443\u0442\u044b"},c.a.createElement(y.a,null)),c.a.createElement(f.h,{onClick:this.onStoryChange,selected:"map"===this.state.activeStory,"data-story":"map",text:this.state.translations.map},c.a.createElement(j.a,null)),c.a.createElement(f.h,{onClick:this.onStoryChange,selected:"settings"===this.state.activeStory,"data-story":"settings",text:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"},c.a.createElement(v.a,null)))},c.a.createElement(k,{id:"transport",go:this.go}),c.a.createElement(S,{id:"map",go:this.go}),c.a.createElement(A,{id:"settings",user:this.state.user,schedule:this.state.schedule,go:this.go})))}}]),t}(c.a.Component);i.a.send("VKWebAppInit"),s.a.render(c.a.createElement(U,null),document.getElementById("root"))},44:function(e,t,a){}},[[156,1,2]]]);
//# sourceMappingURL=main.f1163f09.chunk.js.map